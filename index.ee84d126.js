class e{constructor(e){this.buffer=e,this.pointer=0}readNumber(e,t=!0){return this.bytesToNumber(this.readBytes(e,t))}readFloat(e=!0){const t=new ArrayBuffer(4),a=new DataView(t),r=this.readBytes(4,e);for(const e in r)a.setUint8(e,r[e]);return a.getFloat32(0,!0)}readString(e,t=!0){return this.bytesToString(this.readBytes(e,t))}readBytes(e,t=!0){const a=new Uint8Array(this.buffer.slice(this.pointer,this.pointer+e));return t&&(this.pointer+=e),a}bytesToNumber(e){let t=0;for(let a=0;a<e.length;a++)t+=e[a]<<8*a;return t}bytesToString(e){let t="";for(let a=0;a<e.length;a++)t+=String.fromCharCode(e[a]);return t}}class t{constructor(e){const t=e.readNumber(4)/4;this.colors=[];for(let a=0;a<t;a++)this.colors[a]={},this.colors[a].b=e.readNumber(1),this.colors[a].g=e.readNumber(1),this.colors[a].r=e.readNumber(1),this.colors[a].a=e.readNumber(1)}}class a{constructor(e){this.dataLength=e.readNumber(4),this.tableSize=e.readNumber(1),this.width=e.readNumber(2),this.height=e.readNumber(2),this.mp1=e.readNumber(2),this.mp2=e.readNumber(2),this.imageSize=e.readNumber(4),this.imageType=e.readNumber(1),this.data=[],this.imageData=new ImageData(this.width,this.height),this.zBuffer=[],5===this.imageType?this.readAlphaChannelImage(e):this.readImage(e)}readImage(e){const t=Math.ceil(-(this.height*this.width-this.imageSize)/this.height),a=e.readBytes(this.imageSize);let r=0;for(let e=this.height-1;e>=0;e--){for(let t=0;t<this.width;t++,r++){const i=t+e*this.width;this.data[i]=a[r]}r+=t}}readAlphaChannelImage(e){const t=0==this.tableSize?600:1==this.tableSize?752:960;let a=0;for(;65535!==e.readNumber(2,!1);){a+=e.readNumber(2);const r=e.readNumber(2);for(let i=0;i<r;i++){const r=e.readNumber(2),i=e.readNumber(1),s=a%t+(this.height-1-Math.floor(a/t))*this.width;this.data[s]=i,this.zBuffer[s]=r,a++}}e.readNumber(2)}makeImageData(e){for(const t in this.data){const a=this.data[t],r=void 0!==a,i=4*t,s=r?e.colors[a]:{r:0,g:0,b:0};this.imageData.data[i+0]=s.r,this.imageData.data[i+1]=s.g,this.imageData.data[i+2]=s.b,this.imageData.data[i+3]=r?255:0}}}class r{constructor(e){const t=e.readNumber(4);this.text=e.readString(t),this.text=this.text.substring(0,t-1)}}class i{constructor(e){this.dataLength=e.readNumber(4),this.tableSize=e.readNumber(1),this.width=e.readNumber(2),this.height=e.readNumber(2),this.fullWidth=e.readNumber(2),this.unk3=e.readNumber(4),this.unk4=e.readNumber(2),this.unk5=e.readNumber(2),this.zBuffer=[];const t=[];for(let a=0;a<this.fullWidth*this.height;a++){const r=e.readNumber(2);a%this.fullWidth>=this.width||t.push(r)}for(const e in t){const a=e%this.width,r=(this.height-1-Math.floor(e/this.width))*this.width+a;this.zBuffer.push(t[r])}}}class s{constructor(e){this.value=e.readNumber(2)}}class n{constructor(e){const t=e.readNumber(4);this.data=e.readBytes(t)}}class h{constructor(e){this.dataLength=e.readNumber(4),this.table=[];const t=this.dataLength/4;for(let a=0;a<t;a++)this.table.push(e.readFloat())}}class o{constructor(e){this.dataLength=e.readNumber(4);const t=this.dataLength/2;this.table=[];for(let a=0;a<t;a++)this.table.push(e.readNumber(2))}}class l{constructor(l){this.dataURI="",this.header={signature:"PARTOUT(4.0)RESOURCE",appName:"",description:"",fileSize:0,nGroups:0,tableSize:0,fullWidth:0};const d=new e(l);let c;this.groups=[],d.pointer=21,this.header.appName=d.readString(50),this.header.description=d.readString(100),this.header.fileSize=d.readNumber(4),this.header.nGroups=d.readNumber(2),this.header.tableSize=d.readNumber(2),this.header.fullWidth=d.readNumber(4);const u=[];for(let e=0;e<this.header.nGroups;e++){const l=[],m=d.readNumber(1);for(let b=0;b<m;b++){let m;switch(d.readNumber(1)){case 0:m=new s(d);break;case 1:m=new a(d),u.push({group:e,entry:b});break;case 5:m=new t(d),c=m;break;case 3:case 9:m=new r(d);break;case 10:m=new o(d);break;case 11:m=new h(d);break;case 12:m=new i(d);break;default:m=new n(d)}l.push(m)}this.groups.push(l)}for(const e of u){this.groups[e.group][e.entry].makeImageData(c)}}}const d=["#0080FF","#00FF00","#00FF80","#00FFFF","#8000FF","#8080FF","#80FF00","#80FF80","#80FFFF","#FF0000","#FF0080","#FF00FF","#FF8000","#FF8080","#FF80FF","#FFFF00","#FFFF80"];let c=0;function u(e,t,a){const r=e.getContext("2d");r.setTransform(1,0,0,1,0,0);const i=t.table.slice(2,2+2*t.table[1]),s=50;r.translate(e.width/2,e.height/2),r.fillStyle=d[c%d.length],r.fillText(a,-i[0]*s,i[1]*s),r.scale(-1,1),r.strokeStyle=d[c%d.length],r.lineWidth=1;for(let e=0;e<i.length-1;e+=2)r.beginPath(),r.arc(i[e]*s,i[e+1]*s,1.5,0,2*Math.PI),r.closePath(),r.fill();if(r.beginPath(),1==t.table[1])r.arc(t.table[2]*s,t.table[3]*s,t.table[4]*s,0,2*Math.PI);else{r.moveTo(i[0]*s,i[1]*s);for(let e=2;e<i.length-1;e+=2)r.lineTo(i[e]*s,i[e+1]*s)}r.closePath(),r.stroke(),c++}function m(e){const t=document.createElement("canvas"),a=50;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;const h=e.table.slice(2,2+2*e.table[1]);if(1==e.table[1]){const t=e.table[4];r=e.table[2]-t,i=e.table[2]+t,s=e.table[3]-t,n=e.table[3]+t}else for(let e=0;e<h.length;e+=2)h[e]<r&&(r=h[e]),h[e]>i&&(i=h[e]),h[e+1]<s&&(s=h[e+1]),h[e+1]>n&&(n=h[e+1]);const o=Math.ceil((i-r)*a),l=Math.ceil((n-s)*a);t.width=o+10,t.height=l+10;const d=t.getContext("2d");d.setTransform(1,0,0,1,0,0),d.translate(t.width/2+r*a+o/2,t.height/2-s*a-l/2),d.scale(-1,1),d.strokeStyle="#FFFFFF",d.fillStyle="#FFFFFF",d.lineWidth=1;for(let e=0;e<h.length-1;e+=2)d.beginPath(),d.arc(h[e]*a,h[e+1]*a,1.5,0,2*Math.PI),d.closePath(),d.fill();if(d.beginPath(),1==e.table[1])d.arc(e.table[2]*a,e.table[3]*a,e.table[4]*a,0,2*Math.PI);else{d.moveTo(h[0]*a,h[1]*a);for(let e=2;e<h.length-1;e+=2)d.lineTo(h[e]*a,h[e+1]*a)}return d.closePath(),d.stroke(),t}function b(e){var t=document.createElement("canvas"),a=t.getContext("2d"),r=10,i=Math.sqrt(e.colors.length)*r;t.width=t.height=i;for(var s=a.getImageData(0,0,i,i),n=s.data,h=0,o=i/r;o>0;o--)for(var l=0;l<i/r;l++,h++)for(var d=4*(l*r+o*r*i),c=e.colors[h],u=0;u<r;u++)for(var m=0;m<r;m++){var b=d+4*(u+m*i);n[b]=c.r,n[b+1]=c.g,n[b+2]=c.b,n[b+3]=255}return a.putImageData(s,0,0),t}function g(e){var n=[],l=[],d="ul",c="li",g=document.createElement(d),F=document.createElement("canvas");F.style.border="1px solid white",F.width=1600,F.height=1600;F.getContext("2d");document.body.appendChild(F);let N=1;for(var w=0;w<e.groups.length;w++){var I=e.groups[w],E=document.createElement(c),T=document.createElement("a");T.name=w+"",E.innerHTML="Group "+w+" <span class='base0C'>["+I.length+" Entr"+(1===I.length?"y":"ies")+"]</span>",E.appendChild(T),g.appendChild(E);var v=document.createElement(d);if(E.appendChild(v),!(I.length<=0))for(var y=0;y<I.length;y++){var S=I[y],C=document.createElement(c),z=f(S);C.innerHTML="Entry "+y+", Type: (<span class='"+z.color+"'>"+z.name+"</span>)",v.appendChild(C);var B=document.createElement(d);if(C.appendChild(B),S instanceof s)p(c,B,S.value);else if(S instanceof a)p(c,B,"Width: "+S.width+"px"),p(c,B,"Height: "+S.height+"px"),p(c,B,"Table Size: "+S.tableSize),p(c,B,"Multi-Purpose 1: "+S.mp1),p(c,B,"Multi-Purpose 2: "+S.mp2),n.push({elm:p(c,B,""),group:w,entry:y});else if(S instanceof r)p(c,B,"<div class='container'>"+S.text+"</div>");else if(S instanceof t)B.appendChild(b(S));else if(S instanceof h){if(p(c,B,`Elements: ${S.table.length}`),p(c,B,S.table.join(", ")),600==S.table[0]){p(c,B,`collisionCounter: ${N}`),u(F,S,N);const e=m(S);p(c,B,"").appendChild(e),N++}}else S instanceof o?(p(c,B,`Elements: ${S.table.length}`),p(c,B,S.table.join(", "))):S instanceof i?(p(c,B,"Width: "+S.width+"px"),p(c,B,"Height: "+S.height+"px"),l.push({elm:p(c,B,""),group:w,entry:y})):p(c,B,"")}}return n.forEach((function(t){var a=e.groups[t.group][t.entry],r=function(e){var t=document.createElement("canvas"),a=t.getContext("2d");return t.width=e.width,t.height=e.height,a.putImageData(e.imageData,0,0),t}(a);r.title=`${t.group}-${t.entry}`,a.width>0&&a.height>0&&t.elm.appendChild(r)})),l.forEach((function(t){var a=e.groups[t.group][t.entry],r=function(e){var t=document.createElement("canvas"),a=t.getContext("2d"),r=e.width,i=e.height;t.width=r,t.height=i;var s=a.getImageData(0,0,r,i),n=s.data;for(let t=0;t<e.width*e.height;t++){var h=4*t,o=e.zBuffer[t]/65535*255;n[h+0]=o,n[h+1]=o,n[h+2]=o,n[h+3]=255}return a.putImageData(s,0,0),t}(a);r.title=`${t.group}-${t.entry}`,a.width>0&&a.height>0&&t.elm.appendChild(r)})),g}function f(e){return e instanceof s?{name:"RESOURCE IDENTIFIER",color:"base08"}:e instanceof a?{name:"IMAGE",color:"base09"}:e instanceof r?{name:"TEXT",color:"base0A"}:e instanceof t?{name:"PALETTE",color:"base0B"}:e instanceof o?{name:"INT TABLE",color:"base0E"}:e instanceof h?{name:"FLOAT TABLE",color:"base0C"}:e instanceof i?{name:"Z BUFFER DATA",color:"base0D"}:{name:"UNKNOWN",color:"base04"}}function p(e,t,a){var r=document.createElement(e);return r.innerHTML=a,t.appendChild(r),r}var F=document.getElementById("file");F.onchange=function(){var e=F.files[0],t=new FileReader;t.onload=function(){var e=new l(t.result);document.body.appendChild(g(e))},t.readAsArrayBuffer(e)};
//# sourceMappingURL=index.ee84d126.js.map
